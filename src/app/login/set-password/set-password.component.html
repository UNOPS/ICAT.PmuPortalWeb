<section class="bg-page bg-login flex-grow-1">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-6 login-content-wrapper">
        <div class="login-inner">
          <h4>Reset Your Password</h4>
          <p class="mb-35">Enter details below to <span href="javascript:void(0)" class="text-info font-weight-bold">reset the password</span> of your account.</p>

          <form #fSetPassword="ngForm" autocomplete="off">
            <div *ngIf="showEmail" class="form-group">
              <div class="p-field col-12 col-md-8">
                <label class="font-weight-bold">New Password</label>
                <span class="p-input-icon-right" style="width: 400px">
                  <i *ngIf="!isPasswordType" class="pi pi-eye pass-icon" (click)="togglePasswordText()"></i>
                  <i *ngIf="isPasswordType" class="pi pi-eye-slash pass-icon" (click)="togglePasswordText()"></i>
                  <input id="password" required pInputText [type]="isPasswordType?'password':'text'" #password="ngModel" name="password" pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$"
                         [(ngModel)]="resetPasswordDto.password" placeholder="New Password" class="form-control">
                </span>
              </div>
              <p class="info-message text-danger" *ngIf="(password.errors?.['pattern'])">
                Password must contain more than 8 characters, 1 upper case letter, 1 number, and 1 special character
              </p>
              <p class="info-message text-danger" *ngIf="
                    (password.errors?.['required'] && (password.touched || password.dirty)) ||
                    (password.errors?.['required'] && isSubmitted && fSetPassword.submitted)">
                Password is required
              </p>
            </div>

            <div class="form-group">
              <div class="p-field col-12 col-md-8">
                <label class="font-weight-bold">Confirm Password</label>
                <span class="p-input-icon-right" style="width: 400px">
                  <input required pInputText [type]="isConfirmPasswordType?'password':'text'" #fcpassword="ngModel" name="cpassword" [(ngModel)]="passwordConfirm" placeholder="Confirm Password" class="form-control">
                </span>
              </div>
              <p class="info-message text-danger" *ngIf="
                    (fcpassword.errors?.['required'] && (fcpassword.touched || fcpassword.dirty)) ||
                    (fcpassword.errors?.['required'] && isSubmitted && fSetPassword.submitted )">
                Password is required
              </p>
              <p class="info-message text-danger"
                *ngIf="!fcpassword.errors && ((fcpassword.touched || fcpassword.dirty || fSetPassword.submitted) && passwordConfirm !=  resetPasswordDto.password)">
                Confirm password is mis-match
              </p>
            </div>

            <button class="btn btn-primary btn-block text-uppercase btn-lg mt-35" (click)="clickResetPassword()"
                    [disabled]="(passwordConfirm != resetPasswordDto.password) || (password.errors?.['pattern'])">
              Reset Password
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
